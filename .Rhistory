features[,c(j,2,25), with=FALSE]
features[,c(j,k,25), with=FALSE]
features[,c(j,k,which(names(features=="is_poetry"))), with=FALSE]
which(names(features)=="is_poetry")
debugSource('~/GitHub/Gradu/run_caret_rf.R')
qqq <- run_caret_rf_once(df=df, features = feats, filenamestem = "TEST_TEST")
debugSource('~/GitHub/Gradu/run_caret_rf.R')
qqq <- run_caret_rf_once(df=df, features = feats, filenamestem = "TEST_TEST")
tmp_ret
tmp_ret[1]
names(tmp_ret)
names(tmp_ret)[1]
names(tmp_ret)[2]
pairwise_rets
tmp_ret[1]
unname(tmp_ret[1])
debugSource('~/GitHub/Gradu/run_caret_rf.R')
qqq <- run_caret_rf_once(df=df, features = feats, filenamestem = "TEST_TEST")
tmp_feats
pairwise_rets
debugSource('~/GitHub/Gradu/run_caret_rf.R')
qqq <- run_caret_rf_once(df=df, features = feats, filenamestem = "TEST_TEST")
debugSource('~/GitHub/Gradu/run_caret_rf.R')
qqq <- run_caret_rf_once(df=df, features = feats, filenamestem = "TEST_TEST")
length(tmp_feats)
nrow(tmp_feats)
tmp_model
tryCatch(expr = "tmp_ret <- party::varimp(tmp_model, conditional = TRUE)", error=print(tmp_model))
debugSource('~/GitHub/Gradu/run_caret_rf.R')
qqq <- run_caret_rf_once(df=df, features = feats, filenamestem = "TEST_TEST")
pairwise_rets
which(names(features=="POS_freq_JJ_NN_NN"))
which(names(features)=="POS_freq_JJ_NN_NN")
which(names(features)=="POS_freq_NNP_A_DT")
cforest(is_poetry~., features[,c(15,16,25)], with=FALSE)
cforest(is_poetry~., features[,c(15,16,25)], controls=cforest_unbiased(mtry=2, ntree=1))
rrr <- cforest(is_poetry~., features[,c(15,16,25)], controls=cforest_unbiased(mtry=2, ntree=1))
party::varimp(rrr, conditional=TRUE)
length(which(features[,15]!=features[,16]))
length(intersect(which(features[,15]!=0),which(features[,16]!=0)))
length(intersect(which(features[,14]!=0),which(features[,16]!=0)))
length(intersect(which(features[,14]!=0),which(features[,11]!=0)))
length(intersect(which(features[,14]!=0),which(features[,1]!=0)))
length(intersect(which(features[,14]!=0),which(features[,1]==0)))
length(intersect(which(features[,15]!=0),which(features[,1]==0)))
length(intersect(which(features[,15]!=0),which(features[,16]==0)))
length(intersect(which(features[,16]!=0),which(features[,15]==0)))
length(intersect(which(features[,25]!="POETRY"),which(features[,15]==0)))
length(intersect(which(features[,25]=="POETRY"),which(features[,15]==0)))
length(intersect(which(features[,25]=="POETRY"),which(features[,15]!=0)))
length(intersect(which(features[,25]=="POETRY"),which(features[,16]!=0)))
rrr <- cforest(is_poetry~., features[,c(15,16,25)], controls=cforest_unbiased(mtry=2, ntree=100))
www <- party::varimp(rrr, conditional=TRUE)
rrr
mapply(pairwise_rets, FUN=function(x) {mean(x = x) })
lapply(pairwise_rets, FUN=function(x) {mean(x = x) })
tapply(pairwise_rets, 1,FUN=function(x) {mean(x = x) })
tapply(pairwise_rets, 2,FUN=function(x) {mean(x = x) })
vapply(pairwise_rets, 2,FUN=function(x) {mean(x = x) })
pairwise_rets
vapply(pairwise_rets,FUN=function(x) {mean(x = x) })
lapply(pairwise_rets,FUN=function(x) {mean(x = x) })
lapply(pairwise_rets,FUN=function(x) {print(x)})
mapply(pairwise_rets,FUN=function(x) {print(x)})
mapply(pairwise_rets,SIMPLIFY = FALSE,FUN=function(x) {print(x)})
mapply(pairwise_rets,SIMPLIFY = TRUE,FUN=function(x) {print(x)})
tapply(pairwise_rets,SIMPLIFY = TRUE,FUN=function(x) {print(x)})
tapply(pairwise_rets,FUN=function(x) {print(x)})
apply(pairwise_rets,1,FUN=function(x) {print(x)})
apply(pairwise_rets,2,FUN=function(x) {print(x)})
rowMeans(pairwise_rets)
rowMeans(pairwise_rets, na.rm = TRUE)
options(scipen = 3)
debugSource('~/GitHub/Gradu/run_caret_rf.R')
qqq <- run_caret_rf_once(df=df, features = feats, filenamestem = "TEST_TEST")
variable_importance
qqq <- run_caret_rf_once(df=df, features = feats, filenamestem = "TEST_TEST")
formatC(variable_importance, difits=9)
formatC(variable_importance, digits=9)
formatC(variable_importance$rowMeans.pairwise_rets..na.rm...TRUE., digits=9)
names(variable_importance <- c("conditional_unbiased"))
names(variable_importance) <- c("conditional_unbiased"))
names(variable_importance) <- c("conditional_unbiased")
names(variable_importance)
variable_importance$conditional_unbiased
variable_importance
variable_importance <- data.frame(rowMeans(pairwise_rets, na.rm = TRUE))
names(variable_importance) <- c("conditional_unbiased")
variable_importance
formatC(variable_importance$conditional_unbiased, digits=9)
formatC(variable_importance$conditional_unbiased, digits=8, format="f")
vapply(variable_importance, FUN = function(x) {
if ((x%%1==0)) {
formatC(x, digits=9)
} else {
formatC(x=x, digits=8,format = "f")
}
})
lapply(variable_importance, FUN = function(x) {
if ((x%%1==0)) {
formatC(x, digits=9)
} else {
formatC(x=x, digits=8,format = "f")
}
})
unlist(lapply(variable_importance, FUN = function(x) {
if ((x%%1==0)) {
formatC(x, digits=9)
} else {
formatC(x=x, digits=8,format = "f")
}
})))
unlist(lapply(variable_importance, FUN = function(x) {
if ((x%%1==0)) {
formatC(x, digits=9)
} else {
formatC(x=x, digits=8,format = "f")
}
}))
unlist(unlist(lapply(variable_importance, FUN = function(x) {
if ((x%%1==0)) {
formatC(x, digits=9)
} else {
formatC(x=x, digits=8,format = "f")
}
})))
unname(unlist(lapply(variable_importance, FUN = function(x) {
if ((x%%1==0)) {
formatC(x, digits=9)
} else {
formatC(x=x, digits=8,format = "f")
}
})))
row.names(variable_importance)
debugSource('~/GitHub/Gradu/run_caret_rf.R')
qqq <- run_caret_rf_once(df=df, features = feats, filenamestem = "TEST_TEST")
debugSource('~/GitHub/Gradu/run_caret_rf.R')
qqq <- run_caret_rf_once(df=df, features = feats, filenamestem = "TEST_TEST")
debugSource('~/GitHub/Gradu/run_caret_rf.R')
qqq <- run_caret_rf_once(df=df, features = feats, filenamestem = "TEST_TEST")
debugSource('~/GitHub/Gradu/run_caret_rf.R')
qqq <- run_caret_rf_once(df=df, features = feats, filenamestem = "TEST_TEST")
hmeas.check
summary(hmeas.check)
rf_Tune$results[1:10,]
hmeas.check$metrics
t(hmeas.check$metrics)
sink(file = paste0("C:/Users/Hege/Opiskelu/Kurssit/Gradu/output/", filestem, "_measures.txt")
sink(file = paste0("C:/Users/Hege/Opiskelu/Kurssit/Gradu/output/", filestem, "_measures.txt"))
print(t(hmeas.check))
sink()
sink(file = paste0("C:/Users/Hege/Opiskelu/Kurssit/Gradu/output/", filestem, "_measures.txt"))
print(t(hmeas.check$metrics))
sink()
debugSource('~/GitHub/Gradu/run_caret_rf.R')
source("GitHub/Gradu/init.R")
warnings()
fff <- readRDS("C:/Users/Hege/Opiskelu/Kurssit/Gradu/feats_poetry_alt_whole_title100.RDS")
feats$is_poetry <- fff$is_poetry
debugSource('~/GitHub/Gradu/run_caret_rf.R')
source('~/GitHub/Gradu/run_caret_rf_once.R')
qqq <- run_caret_rf_once(df = df, features = feats,filenamestem = "Poetry100_20170614", get_pairwise_comparison = TRUE)
debugSource('~/GitHub/Gradu/run_caret_rf.R')
qqq <- run_caret_rf_once(df = df, features = feats,filenamestem = "Poetry100_20170614", get_pairwise_comparison = TRUE)
debugSource('~/GitHub/Gradu/run_caret_rf.R')
source('~/GitHub/Gradu/run_caret_rf_once.R')
qqq <- run_caret_rf_once(df = df, features = feats,filenamestem = "Poetry100_20170614", get_pairwise_comparison = TRUE)
debugSource('~/GitHub/Gradu/run_caret_rf.R')
source('~/GitHub/Gradu/run_caret_rf_once.R')
qqq <- run_caret_rf_once(df = df, features = feats,filenamestem = "Poetry100_20170614", get_pairwise_comparison = TRUE)
debugSource('~/GitHub/Gradu/run_caret_rf.R')
source('~/GitHub/Gradu/run_caret_rf_once.R')
qqq <- run_caret_rf_once(df = df, features = feats,filenamestem = "Poetry100_20170614", get_pairwise_comparison = TRUE)
rf_Tune$method
rf_Tune$modelInfo$label
rf_Tune$modelInfo$fit()
rf_Tune$modelInfo$fit
rf_Tune$results[1:10,]
nrow(rf_Tune$results)
rf_Tune$results
rf_Tune$pred[1:10,]
rf_Tune$pred[1:10]
rf_Tune$pred
rf_Tune$bestTune
rf_Tune$metric[1:10,]
rf_Tune$metric[1:10]
rf_Tune$control$method
rf_Tune$control$verboseIter
rf_Tune$control$trim
rf_Tune$control$allowParallel
rf_Tune$control$p
rf_Tune$finalModel
rf_Tune$preProcess
rf_Tune$trainingData
rf_Tune$resample
rf_Tune$resampledCM
rf_Tune$perfNames
rf_Tune$maximize
rf_Tune$yLimits
rf_Tune$times
rf_Tune$levels
rf_Tune$terms
rf_Tune$coefnames
rf_Tune$xlevels
rf_Tune$xlevels[1]
rf_Tune$results
hmeas.check
hmeas.check$metrics
sink(file = paste0("C:/Users/Hege/Opiskelu/Kurssit/Gradu/output/", filestem, "_variable_importance.txt"))
print(variable_importance)
sink()
rf_Tune$results
hmeas.check$metrics
source('~/GitHub/Gradu/run_caret_rf.R')
debugSource('~/GitHub/Gradu/run_caret_rf.R')
source("GitHub/Gradu/run_caret_rf_once.R")
feats2 <- feats[,c(1:2,25)]
feats[1:10,]
feats2[1:10,]
feats2 <- feats[,c(1:2,101)]
feats2[1:10,]
qqq <- run_caret_rf_once(df = df, features = feats2,filenamestem = "Poetry100_20170614", get_pairwise_comparison = TRUE)
qqq <- run_caret_rf_once(df = df, features = feats2,filenamestem = "TEST_Poetry100_20170614", get_pairwise_comparison = TRUE)
debugSource('~/GitHub/Gradu/run_caret_rf.R')
source("GitHub/Gradu/run_caret_rf_once.R")
qqq <- run_caret_rf_once(df = df, features = feats2,filenamestem = "TEST_Poetry100_20170614", get_pairwise_comparison = TRUE)
debugSource('~/GitHub/Gradu/run_caret_rf.R')
source("GitHub/Gradu/run_caret_rf_once.R")
qqq <- run_caret_rf_once(df = df, features = feats2,filenamestem = "TEST_Poetry100_20170614", get_pairwise_comparison = TRUE)
debugSource('~/GitHub/Gradu/run_caret_rf.R')
source("GitHub/Gradu/run_caret_rf_once.R")
qqq <- run_caret_rf_once(df = df, features = feats2,filenamestem = "TEST_Poetry100_20170614", get_pairwise_comparison = TRUE)
debugSource('~/GitHub/Gradu/run_caret_rf.R')
source("GitHub/Gradu/run_caret_rf_once.R")
qqq <- run_caret_rf_once(df = df, features = feats2,filenamestem = "TEST_Poetry100_20170614", get_pairwise_comparison = TRUE)
ratio_is_poetry
features$is_poetry
debugSource('~/GitHub/Gradu/run_caret_rf.R')
source("GitHub/Gradu/run_caret_rf_once.R")
qqq <- run_caret_rf_once(df = df, features = feats2,filenamestem = "TEST_Poetry100_20170614", get_pairwise_comparison = TRUE)
predictors(varLists)
varLists$optVariables
varLists$bestSubset
varLists$variables
varLists$fit
varLists$optVariables
varLists$resample
varLists$metric
varLists$maximize
varLists$perfNames
varLists$resampledCM
varLists$obsLevels
varLists$times
varLists <- rfe(x=features[,c(1:2)], y=is_poetry, sizes=c(2), rfeControl = rfeControl(functions=rfFuncs))
varLists$bestSubset
varLists$optVariables
varLists$resample
varLists$optVariables
varLists$metric
varLists$fit
varLists$perfNames
varLists$resampledCM
varLists$obsLevels
varLists$pred
varLists$variables
varLists$bestSubset
varLists$results
print(varLists)
print(predictors(varLists))
source('~/GitHub/Gradu/run_caret_rf.R')
debugSource('~/GitHub/Gradu/run_caret_rf.R')
source("GitHub/Gradu/run_caret_rf_once.R")
qqq <- run_caret_rf_once(df = df, features = feats2,filenamestem = "TEST_Poetry100_20170614", get_pairwise_comparison = TRUE)
debugSource('~/GitHub/Gradu/run_caret_rf.R')
source("GitHub/Gradu/run_caret_rf_once.R")
qqq <- run_caret_rf_once(df = df, features = feats2,filenamestem = "TEST_Poetry100_20170614", get_pairwise_comparison = TRUE)
feats2
names(feats)
names(feats2)
f2[-"is_poetry"]
f2[,-"is_poetry"]
f2[,c("is_poetry")]
feats2[,-"is_poetry"]
feats2[,-is_poetry]
feats2[,$is_poetry]
feats2[,names(1:"")]
feats2[,names(1:2)]
feats2[,c(1:2)]
feats2[,c(1:length(feats2))]
feats2[,c(1:length(feats2).1)]
feats2[,c(1:length(feats2)-1)]
debugSource('~/GitHub/Gradu/run_caret_rf.R')
source("GitHub/Gradu/run_caret_rf_once.R")
qqq <- run_caret_rf_once(df = df, features = feats2,filenamestem = "TEST_Poetry100_20170614", get_pairwise_comparison = TRUE)
debugSource('~/GitHub/Gradu/run_caret_rf.R')
source("GitHub/Gradu/run_caret_rf_once.R")
qqq <- run_caret_rf_once(df = df, features = feats2,filenamestem = "TEST_Poetry100_20170614", get_pairwise_comparison = TRUE)
debugSource('~/GitHub/Gradu/run_caret_rf.R')
source("GitHub/Gradu/run_caret_rf_once.R")
qqq <- run_caret_rf_once(df = df, features = feats2,filenamestem = "TEST_Poetry100_20170614", get_pairwise_comparison = TRUE)
f2
www <- 2
www <- 3
f2 <- features[,c(1:www)]
f2
f2 <- features
features$is_poetry <- NULL
f2
features2
features
debugSource('~/GitHub/Gradu/run_caret_rf.R')
source("GitHub/Gradu/run_caret_rf_once.R")
qqq <- run_caret_rf_once(df = df, features = feats2,filenamestem = "TEST_Poetry100_20170614", get_pairwise_comparison = TRUE)
feats_poetry_whole_title25 <- readRDS("C:/Users/Hege/Opiskelu/Kurssit/Gradu/feats_poetry_whole_title25_20170515.RDS")
feats_poetry_whole_title25$is_poetry <- feats2$is_poetry
feats_poetry_whole_title50 <- readRDS("C:/Users/Hege/Opiskelu/Kurssit/Gradu/feats_poetry_whole_title50_20170515.RDS")
feats_poetry_whole_title100 <- readRDS("C:/Users/Hege/Opiskelu/Kurssit/Gradu/feats_poetry_whole_title100_20170515.RDS")
feats_poetry_whole_title200 <- readRDS("C:/Users/Hege/Opiskelu/Kurssit/Gradu/feats_poetry_whole_title200_20170511.RDS")
feats_poetry_whole_title300 <- readRDS("C:/Users/Hege/Opiskelu/Kurssit/Gradu/feats_poetry_whole_title300_20170515.RDS")
feats_poetry_whole_title50$is_poetry <- feats2$is_poetry
feats_poetry_whole_title100$is_poetry <- feats2$is_poetry
feats_poetry_whole_title200$is_poetry <- feats2$is_poetry
feats_poetry_whole_title300$is_poetry <- feats2$is_poetry
saveRDS(feats_poetry_whole_title25, "C:/Users/Hege/Opiskelu/Kurssit/Gradu/feats_poetry_whole_title25_20170618.RDS")
saveRDS(feats_poetry_whole_title50, "C:/Users/Hege/Opiskelu/Kurssit/Gradu/feats_poetry_whole_title50_20170618.RDS")
saveRDS(feats_poetry_whole_title100, "C:/Users/Hege/Opiskelu/Kurssit/Gradu/feats_poetry_whole_title100_20170618.RDS")
saveRDS(feats_poetry_whole_title200, "C:/Users/Hege/Opiskelu/Kurssit/Gradu/feats_poetry_whole_title200_20170618.RDS")
saveRDS(feats_poetry_whole_title300, "C:/Users/Hege/Opiskelu/Kurssit/Gradu/feats_poetry_whole_title300_20170618.RDS")
source('~/GitHub/Gradu/run_caret_rf.R')
source("GitHub/Gradu/init.R")
feats_poetry_whole_title25 <- readRDS("C:/Users/Hege/Opiskelu/Kurssit/Gradu/feats_poetry_whole_title25_20170618.RDS")
qqq <- run_caret_rf_once(df=df, features=feats_poetry_whole_title25, filenamestem = "Poetry25_20170619", get_pairwise_comparison = TRUE)
feats_poetry_whole_title25 <- readRDS("C:/Users/Hege/Opiskelu/Kurssit/Gradu/feats_poetry_whole_title25_20170618.RDS")
qqq <- run_caret_rf_once(df=df, features=feats_poetry_whole_title25, filenamestem = "Poetry25_20170619", get_pairwise_comparison = TRUE)
feats_poetry_whole_title50 <- readRDS("C:/Users/Hege/Opiskelu/Kurssit/Gradu/feats_poetry_whole_title50_20170618.RDS")
qqq <- run_caret_rf_once(df=df, features=feats_poetry_whole_title50, filenamestem = "Poetry50_20170619", get_pairwise_comparison = TRUE)
source('~/GitHub/Gradu/run_caret_rf.R')
source('~/GitHub/Gradu/run_caret_rf_once.R')
source('~/GitHub/Gradu/run_caret_rf.R')
source('~/GitHub/Gradu/run_caret_rf_once.R')
debugSource('~/GitHub/Gradu/run_caret_rf.R')
source('~/GitHub/Gradu/run_caret_rf_once.R')
qqq <- run_caret_rf_once(df=df, features=feats_poetry_whole_title50, filenamestem = "Poetry50_20170619", get_pairwise_comparison = TRUE, get_rfe=FALSE)
debugSource('~/GitHub/Gradu/run_caret_rf.R')
source('~/GitHub/Gradu/run_caret_rf_once.R')
qqq <- run_caret_rf_once(df=df, features=feats_poetry_whole_title50, filenamestem = "Poetry50_20170619", get_pairwise_comparison = TRUE, get_rfe=FALSE)
source('~/GitHub/Gradu/run_caret_rf_once.R')
qqq <- run_caret_rf_once(df=df, features=feats_poetry_whole_title50[,c(1,2,51)], filenamestem = "TEST_20170619", get_pairwise_comparison = TRUE, get_rfe=FALSE)
n
qqq <- run_caret_rf_once(df=df, features=feats_poetry_whole_title50[,c(1,2,51)], filenamestem = "TEST_20170619", get_pairwise_comparison = TRUE, get_rfe=FALSE)
prediction
cm <- confusionMatrix(data=prediction, reference=is_poetry2, positive="POETRY")
cm
source('~/GitHub/Gradu/run_caret_rf.R')
source('~/GitHub/Gradu/run_caret_rf_once.R')
feats_poetry_whole_title25 <- readRDS("C:/Users/Hege/Opiskelu/Kurssit/Gradu/feats_poetry_whole_title25_20170618.RDS")
qqq <- run_caret_rf_once(df=df, features=feats_poetry_whole_title25, filenamestem = "Poetry25_20170619b", get_pairwise_comparison = TRUE)
feats_poetry_whole_title50 <- readRDS("C:/Users/Hege/Opiskelu/Kurssit/Gradu/feats_poetry_whole_title50_20170618.RDS")
qqq <- run_caret_rf_once(df=df, features=feats_poetry_whole_title50, filenamestem = "Poetry50_20170619b", get_pairwise_comparison = TRUE)
feats_poetry_whole_title100 <- readRDS("C:/Users/Hege/Opiskelu/Kurssit/Gradu/feats_poetry_whole_title100_20170618.RDS")
qqq <- run_caret_rf_once(df=df, features=feats_poetry_whole_title100, filenamestem = "Poetry100_20170619b", get_pairwise_comparison = TRUE)
feats_poetry_whole_title200 <- readRDS("C:/Users/Hege/Opiskelu/Kurssit/Gradu/feats_poetry_whole_title200_20170618.RDS")
qqq <- run_caret_rf_once(df=df, features=feats_poetry_whole_title200, filenamestem = "Poetry200_20170619b", get_pairwise_comparison = TRUE)
feats_poetry_whole_title300 <- readRDS("C:/Users/Hege/Opiskelu/Kurssit/Gradu/feats_poetry_whole_title300_20170618.RDS")
qqq <- run_caret_rf_once(df=df, features=feats_poetry_whole_title300, filenamestem = "Poetry300_20170619b", get_pairwise_comparison = TRUE)
source("GitHub/Gradu/init.R")
feats_all <- readRDS(paste0(bu_path, "/features_all_20170429.RDS"))
tagged_whole_title <- readRDS(paste0(bu_path, "/Titles/tagged_titles3.RDS"))
unique_tags <- unique(unlist(str_extract_all(tagged_whole_title, "(?:/)[^ /0-9]+ ")))
unique_tags <- gsub("^/", "", unique_tags)
unique_tags <- gsub(" $", "", unique_tags)
tags_whole_title <- str_extract_all(tagged_whole_title, "(?:/)[^ /0-9]+ ")
pos_tag <- list()
unique(feats_all$no_of_words)
unique_tags
feats_pos_whole_title <- lapply(unique_tags, FUN=function(x, pos_tag) {
tag_name <- paste0("pos_", x)
tag_name <- gsub("[,]", "comma", tag_name)
tag_name <- gsub("[.]", "period", tag_name)
tag_name <- gsub("[-]", "hyphen", tag_name)
tag_name <- gsub("[$]", "dollar", tag_name)
tag_name <- gsub("[:]", "semicolon", tag_name)
tag_name <- gsub("[`']", "singlequote", tag_name)
pos_tag[[tag_name]] <- str_count(string=tags_whole_title, pattern=paste0("/", x, " ")) / feats_all$no_of_words
print(paste0(tag_name, pos_tag[[tag_name]][1000:1003]))
pos_tag
}, pos_tag=pos_tag)
feats_pos_whole_title <- data.frame(feats_pos_whole_title)
feats_pos_whole_title[1000:1010,1:4]
feats_pos_whole_title$pos_singlequote <- feats_pos_whole_title$pos_singlequotesinglequote + feats_pos_whole_title$pos_singlequotesinglequote.1
feats_pos_whole_title$pos_singlequotesinglequote <- NULL
feats_pos_whole_title$pos_singlequotesinglequote.1 <- NULL
feats_pos_whole_title$is_poetry <- feats_$is_poetry
feats_pos_whole_title$is_poetry <- feats_all$is_poetry
saveRDS(feats_pos_whole_title, paste0(bu_path, "/feats_pos_whole_title_20170816.RDS"))
tagged_whole_title <- readRDS(paste0(bu_path, "/Titles/tagged_titles3.RDS"))
unique_tags <- unique(unlist(str_extract_all(tagged_whole_title, "(?:/)[^ /0-9]+ ")))
unique_tags <- gsub("^/", "", unique_tags)
unique_tags <- gsub(" $", "", unique_tags)
tags_whole_title <- str_extract_all(tagged_whole_title, "(?:/)[^ /0-9]+ ")
saveRDS(tags_whole_title, paste0(bu_path, "/tags_whole_title_20170816.RDS"))
tagged_title_only <- readRDS(paste0(bu_path, "/Titles/tagged_titles_only_RERUN.RDS"))
unique_tags <- unique(unlist(str_extract_all(tagged_title_only, "(?:/)[^ /0-9]+ ")))
unique_tags <- gsub("^/", "", unique_tags)
unique_tags <- gsub(" $", "", unique_tags)
tags_title_only <- str_extract_all(tagged_title_only, "(?:/)[^ /0-9]+ ")
saveRDS(tags_title_only, paste0(bu_path, "/tags_title_only_20170816.RDS"))
tags_whole_title[1000:1010]
source("get_POS_trigrams.R")
get_POS_trigrams(tags_whole_title[1010])
source("get_frequencies.R
")
source("get_frequencies.R
")
source("get_frequencies.R")
get_frequencies(tags_whole_title[1010])
str_extract_all(string=tags_whole_title[1010], pattern = "(^| )[^ ]+ [^ ]+ [^ ]( |$)")
str_extract_all(string=tags_whole_title[1010], pattern = "(^| )[^ ]+ [^ ]+ [^ ]+( |$)")
tags_whole_title <- readRDS(paste0(bu_path, "/tags_whole_title_20170816.RDS"))
tags_whole_title <- gsub("^/", "", tags_whole_title)
tags_whole_title <- gsub(" $", "", tags_whole_title)
tags_whole_title <- gsub("[,]", "comma", tags_whole_title)
tags_whole_title <- gsub("[:]", "semicolon", tags_whole_title)
tags_whole_title <- gsub("[.]", "period", tags_whole_title)
tags_whole_title <- gsub("[-]", "hyphen", tags_whole_title)
tags_whole_title <- gsub("['`]", "apostrophe", tags_whole_title)
str_extract_all(string=tags_whole_title[1010], pattern = "(^| )[^ ]+ [^ ]+ [^ ]+( |$)")
str_extract_all(string=tags_whole_title[1010], pattern = "(^| )[^ ]+ [^ ]+ [^ ]+( |$)",simplify = TRUE)
tags_whole_title[1010]
tags_whole_title <- readRDS(paste0(bu_path, "/tags_whole_title_20170816.RDS"))
tags_whole_title[1010]
tags_whole_title <- gsub("^/", "", tags_whole_title)
tags_whole_title[1010]
str_join(tags_whole_title[1010])
str_c(tags_whole_title)
str_c(tags_whole_title[1010])
tags_whole_title <- readRDS(paste0(bu_path, "/tags_whole_title_20170816.RDS"))
str_c(tags_whole_title[1010])
tags_whole_title[10101]
str_c(tags_whole_title[[1010]])
qqq <- unlist(tags_whole_title[1010])
qqq
str_c(qqq)
length(str_c(qqq))
paste(qqq, sep=" ")
paste(qqq, sep=" ", collapse=TRUE)
paste(qqq, sep=" ", collapse=" ")
paste(qqq, sep="", collapse=" ")
paste(qqq, sep="", collapse="")
tags_whole_title <- gsub("^/", "", tags_whole_title)
tags_whole_title[1010]
tags_whole_title <- readRDS(paste0(bu_path, "/tags_whole_title_20170816.RDS"))
tags_whole_title <- paste(tags_whole_title, collapse="")
tags_whole_title[1010]
tags_whole_title[1009]
length(tags_whole_title)
nchar(tags_whole_title[1])
tags_whole_title <- lapply(tags_whole_title, FUN=function(x) { paste(x, collapse="")})
tags_whole_title <- readRDS(paste0(bu_path, "/tags_whole_title_20170816.RDS"))
tags_whole_title <- lapply(tags_whole_title, FUN=function(x) { paste(x, collapse="")})
tags_whole_title[1010]
tags_whole_title <- lapply(tags_whole_title, FUN=function(x) { gsub("/", "", x)})
tags_whole_title[1010]
tags_whole_title <- lapply(tags_whole_title, FUN=function(x) {gsub(" $", "", x)})
tags_whole_title <- lapply(tags_whole_title, FUN=function(x) {gsub("[,]", "comma", x)})
tags_whole_title <- lapply(tags_whole_title, FUN=function(x) {gsub("[:]", "semicolon", x)})
tags_whole_title <- lapply(tags_whole_title, FUN=function(x) {gsub("[.]", "period", x)})
tags_whole_title <- lapply(tags_whole_title, FUN=function(x) {gsub("[-]", "hyphen", x)})
tags_whole_title <- lapply(tags_whole_title, FUN=function(x) {gsub("['`]", "apostrophe", x)})
tags_whole_title <- lapply(tags_whole_title, FUN=function(x) {gsub("([[:lower:]]+) comma ", "\\1", x)})
tags_whole_title <- lapply(tags_whole_title, FUN=function(x) {gsub("([[:lower:]]+) period ", "\\1", x)})
str_extract_all(string=tags_whole_title[1010], pattern = "(^| )[^ ]+ [^ ]+ [^ ]+( |$)")
tags_whole_title[1010]
tags_whole_title <- lapply(tags_whole_title, FUN=function(x) { paste(x, collapse="")})
tags_whole_title <- lapply(tags_whole_title, FUN=function(x) { gsub("/", "", x)})
tags_whole_title <- lapply(tags_whole_title, FUN=function(x) {gsub(" $", "", x)})
tags_whole_title <- lapply(tags_whole_title, FUN=function(x) {gsub("[,]", "comma", x)})
tags_whole_title <- readRDS(paste0(bu_path, "/tags_whole_title_20170816.RDS"))
tags_whole_title <- lapply(tags_whole_title, FUN=function(x) { paste(x, collapse="")})
tags_whole_title <- lapply(tags_whole_title, FUN=function(x) { gsub("/", "", x)})
tags_whole_title <- lapply(tags_whole_title, FUN=function(x) {gsub(" $", "", x)})
tags_whole_title <- lapply(tags_whole_title, FUN=function(x) {gsub("[,]", "comma", x)})
tags_whole_title <- lapply(tags_whole_title, FUN=function(x) {gsub("[:]", "semicolon", x)})
tags_whole_title <- lapply(tags_whole_title, FUN=function(x) {gsub("[.]", "period", x)})
tags_whole_title <- lapply(tags_whole_title, FUN=function(x) {gsub("[-]", "hyphen", x)})
tags_whole_title <- lapply(tags_whole_title, FUN=function(x) {gsub("['`]", "apostrophe", x)})
tags_whole_title <- lapply(tags_whole_title, FUN=function(x) {gsub("([[:lower:]]+) period", "\\1", x)})
install.packages("quanteda")
library(quanteda)
dfm(tags_whole_title[1000:1010], ngrams=3)
quanteda::dfm(tags_whole_title[1000:1010], ngrams=3)
qqq <- lapply(tags_whole_title[1000:1010], FUN=function(x) {dfm(x, ngrams=3)})
qqq
qqq <- unlist(tags_whole_title[1000:1010])
qqq
dfm(qqq, ngrams=3)
qq <- dfm(qqq, ngrams=3)
qq[1:10]
qq[1:10,]
names(qq)
colnames(qq)
table(qq)
data.frame(qq)
data.frame(qq)[1:10,1:4]
tags_whole_title <- unlist(tags_whole_title)
saveRDS(tags_whole_title, paste0(bu_path, "/tags_whole_title_preprocessed_20170816.RDS"))
poetry_inds <- which(feats_all$is_poetry=="TRUE")
length(poetry_inds)
df_pos_trigrams <- data.frame(dfm(tags_whole_title[poetry_inds], ngrams=3))
qc()
gc()
df_pos_trigrams <- data.frame(dfm(tags_whole_title[poetry_inds], ngrams=3))
